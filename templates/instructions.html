<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to Play Two-Man Spades</title>
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-F5VP0CXERK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-F5VP0CXERK');
    </script>

    <link rel="stylesheet" href="{{ url_for('static', filename='instructions.css') }}">
</head>

<body>
    <a href="/" class="back-button">← Back to Game</a>

    <div class="container">
        <h1>How to Play Two-Man Spades</h1>

        <div class="section">
            <div class="highlight">
                <h3>About This Game</h3>
                <p><strong>This is a custom variant developed over years of play.</strong> While based on traditional
                    Spades, this "Two-Man Spades" includes unique rules like parity scoring, special bag-reduction
                    cards, and blind bidding that don't exist in standard Spades. The game mechanics have been tested
                    and refined to be balanced and enjoyable, but this is essentially a "house rules" version.</p>
                <p><strong>Original invented rules:</strong> <a
                        href="https://docs.google.com/spreadsheets/d/1uxxzX09zhGm0b8R48Fi4vHvOEyrlp1AmVN-sN41voj0/edit?usp=sharing"
                        target="_blank" style="color: #3182ce;">Chicken-scratched 2manSpades rules...</a></p>
            </div>
        </div>

        <div class="section">
            <h2>Install as Mobile App</h2>
            <p>You can install Two-Man Spades as an app on your phone for a better full-screen experience:</p>

            <div class="tip">
                <strong>iPhone (Safari):</strong>
                <ol>
                    <li>Open the game in Safari</li>
                    <li>Tap the Share button (square with arrow up)</li>
                    <li>Scroll down and tap "Add to Home Screen"</li>
                    <li>Tap "Add" - the game icon will appear on your home screen</li>
                </ol>
            </div>

            <div class="tip">
                <strong>Android (Chrome):</strong>
                <ol>
                    <li>Open the game in Chrome</li>
                    <li>Tap the three dots menu (⋮)</li>
                    <li>Tap "Add to Home Screen" or "Install app"</li>
                    <li>Tap "Add" - the game icon will appear on your home screen</li>
                </ol>
            </div>

            <p>Once installed, the game will open in full-screen mode without browser bars, just like a native app!</p>
        </div>

        <div class="section">
            <h2>Overview</h2>
            <p>Two-Man Spades is a trick-taking card game where you compete against Marta (the computer) to reach 300
                points first. Each hand, you'll discard one card, bid on how many tricks you think you can win, then
                play cards strategically to meet your bid while preventing your opponent from meeting theirs.</p>
        </div>

        <div class="section">
            <h2>Game Setup</h2>
            <p>At the start of each game, players are randomly assigned <strong>parity</strong>:</p>
            <ul>
                <li><strong>Even Player:</strong> Gets bonus points when discard pile totals an even number</li>
                <li><strong>Odd Player:</strong> Gets bonus points when discard pile totals an odd number</li>
            </ul>
            <p>Each hand deals 11 cards to each player from a standard 52-card deck.</p>
        </div>

        <div class="section">
            <h2>Hand Flow</h2>

            <h3>1. Discard Phase</h3>
            <p>Each player selects one card to discard face-down. These cards are revealed simultaneously and:</p>
            <ul>
                <li>Their face values are added together (Ace=1, Jack=11, Queen=12, King=13)</li>
                <li>The player whose parity matches the total gets bonus points</li>
                <li>If both cards are the same suit OR same rank, points are doubled</li>
                <li>Base bonus is 10 points (20 for doubles)</li>
            </ul>

            <div class="example">
                <strong>Example:</strong> You discard 7♣ (value 7), Marta discards 6♥ (value 6).
                Total = 13 (odd). If you're the odd player, you get 10 points.
                If both cards were hearts, you'd get 20 points instead.
            </div>

            <h3>2. Bidding Phase</h3>
            <p>Players bid how many tricks (out of 10) they expect to win with their remaining cards.</p>

            <div class="highlight">
                <strong>Special Bidding Rules:</strong>
                <ul>
                    <li><strong>NIL (0 bid):</strong> If you take exactly 0 tricks, get +200 points. If you take any
                        tricks, lose -200 points and gain that many bags.</li>
                    <li><strong>Blind Bidding:</strong> When down by 100+ points, you can bid "blind" (5-10 tricks) for
                        double points/penalties before seeing your cards!</li>
                    <li><strong>Blind NIL:</strong> When down by 100+ points, you can attempt Blind NIL - if successful,
                        you instantly win the entire game. If you fail by taking any tricks, you instantly lose the
                        game!</li>
                </ul>
            </div>

            <h3>3. Playing Tricks</h3>
            <p>Players take turns playing cards. The person with the odd parity leads the first trick of each hand.</p>

            <h4>Playing Rules:</h4>
            <ul>
                <li><strong>Follow Suit:</strong> You must play the same suit as the lead card if you have it</li>
                <li><strong>Trump:</strong> Spades (♠) always beat other suits</li>
                <li><strong>Spades Broken:</strong> You can't lead spades until they've been "broken" by someone playing
                    a spade on a different suit</li>
                <li><strong>Highest Card Wins:</strong> Within the same suit, higher cards win (Ace is highest)</li>
            </ul>

            <div class="example">
                <strong>Trick Example:</strong> Marta leads <span class="card-example heart">Q♥</span>.
                You have <span class="card-example heart">7♥</span> and <span class="card-example spade">3♠</span>.
                You must play the 7♥ (follow suit). Marta wins with the higher heart.
            </div>
        </div>

        <div class="section">
            <h2>Scoring System</h2>

            <h3>Basic Scoring</h3>
            <table class="scoring-table">
                <tr>
                    <th>Situation</th>
                    <th>Points Earned</th>
                </tr>
                <tr>
                    <td>Made your bid exactly</td>
                    <td>Bid × 10 points</td>
                </tr>
                <tr>
                    <td>Made more than your bid</td>
                    <td>Bid × 10 points + 1 bag per extra trick</td>
                </tr>
                <tr>
                    <td>Failed to make your bid</td>
                    <td>Lose Bid × 10 points</td>
                </tr>
                <tr>
                    <td>NIL success (0 bid, 0 tricks)</td>
                    <td>+200 points</td>
                </tr>
                <tr>
                    <td>NIL failure (0 bid, any tricks)</td>
                    <td>-200 points + tricks as bags</td>
                </tr>
                <tr>
                    <td>Blind bid success</td>
                    <td>Double normal points</td>
                </tr>
                <tr>
                    <td>Blind bid failure</td>
                    <td>Double normal penalty</td>
                </tr>
                <tr>
                    <td>Blind NIL success</td>
                    <td>INSTANT GAME WIN</td>
                </tr>
                <tr>
                    <td>Blind NIL failure</td>
                    <td>INSTANT GAME LOSS</td>
                </tr>
            </table>

            <h3>Bags System</h3>
            <p>Bags are penalties for taking more tricks than you bid:</p>
            <ul>
                <li>Every 7 bags = -100 points penalty</li>
                <li>Negative bags give bonuses: every 5 negative bags = +100 points</li>
                <li>Your score display shows base score + bags in the ones digit</li>
            </ul>

            <div class="tip">
                <strong>Bag Strategy:</strong> Sometimes it's better to let your opponent win a trick rather than
                accumulate bags, especially when you're close to a 7-bag penalty! Watch out - Marta now actively tries
                to force you to take unwanted tricks when you have 5+ bags.
            </div>
        </div>

        <div class="section">
            <h2>Special Cards</h2>
            <p>Two cards provide bag reduction when won in tricks or discard piles:</p>
            <ul>
                <li><span class="card-example diamond">7♦</span> Seven of Diamonds: -2 bags</li>
                <li><span class="card-example club">10♣</span> Ten of Clubs: -1 bag</li>
            </ul>
            <p>The player who wins the trick or discard pile containing these cards gets the bag reduction.</p>
        </div>
        <h2>Winning the Game</h2>
        <p>The game ends when:</p>
        <ul>
            <li><strong>Target Reached:</strong> Someone reaches 300 points (higher display score wins)</li>
            <li><strong>Mercy Rule:</strong> Someone leads by 300+ points (automatic win)</li>
            <li><strong>Blind NIL:</strong> Successful Blind NIL instantly wins the game, failed Blind NIL instantly
                loses</li>
        </ul>

        <div class="highlight">
            <h3>Denial Rule - Keep the Game Alive!</h3>
            <p><strong>Critical mechanic:</strong> When someone would reach 300+ points from winning the discard pile,
                but they're currently losing the game, the DENIAL RULE automatically activates! Instead of gaining those
                discard points, their opponent LOSES those points instead. This keeps close games alive for another hand
                instead of ending on a lucky discard!</p>

            <div class="example">
                <strong>Example:</strong> You're at 295, Marta's at 305. You win the discard pile for 10 points, which
                would give you 305 and end the game. But since you're behind, DENIAL activates - Marta loses 10 points
                instead (drops to 295), and the game continues 295 to 295 for another hand!
            </div>
        </div>

        <h3>Game End Logic (When Either Player Hits 300+)</h3>
        <p><strong>Simple Rule: Higher display score ALWAYS wins, regardless of how you got there, and negative bags are
                BAD in this situation.</strong></p>

        <div class="example">
            <strong>Scenarios when both players are over 300:</strong>
            <ul>
                <li><strong>Player A:</strong> 302 display, <strong>Player B:</strong> 301 display → <strong>Player A
                        wins</strong></li>
                <li><strong>Player A:</strong> 315 display, <strong>Player B:</strong> 320 display → <strong>Player B
                        wins</strong></li>
                <li><strong>Player A:</strong> 300 display, <strong>Player B:</strong> 306 display → <strong>Player B
                        wins</strong></li>
            </ul>
        </div>

        <h3>Tie-Breaking (Only When Display Scores Are Exactly Equal)</h3>
        <p>Display score ties are extremely rare and only occur when negative bags are involved:</p>
        <ol>
            <li>Player with higher base score wins</li>
            <li>If base scores are tied, player with more bags wins (more bags is better)</li>
            <li>If everything is exactly equal, the game ends in a tie</li>
        </ol>

        <div class="example">
            <strong>Realistic Tie-Breaking Examples:</strong>
            <ul>
                <li><strong>300 with -1 bags</strong> vs <strong>300 with 0 bags</strong> → <strong>Player with 0 bags
                        wins</strong> (0 > -1)</li>
                <li><strong>300 with -4 bags</strong> vs <strong>300 with -2 bags</strong> → <strong>Player with -2 bags
                        wins</strong> (-2 > -4)</li>
                <li><strong>310 with -3 bags</strong> vs <strong>320 with -4 bags </strong> → <strong>Player with 320
                        and -4 bags wins</strong> (-1 < -4)</li>
            </ul>
            <p><strong>Why ties are rare:</strong> Positive bags always change the display score, so ties only happen
                when at least one player has negative bags.</p>
        </div>

        <h3>Bag System Limits</h3>
        <div class="tip">
            <strong>Automatic Bag Management:</strong>
            <ul>
                <li><strong>Maximum bags:</strong> 6 (7+ bags triggers -100 point penalty and resets to remainder)</li>
                <li><strong>Minimum bags:</strong> -4 (-5+ negative bags triggers +100 point bonus and resets to
                    remainder)</li>
                <li><strong>Tie-breaking hierarchy:</strong> 6 > 5 > 4 > 3 > 2 > 1 > 0 > -1 > -2 > -3 > -4</li>
                <li><strong>Key insight:</strong> Negative bags hurt in tie-breaking but never reduce your display score
                </li>
            </ul>
        </div>

        <h3>Why This System Works</h3>
        <div class="section">
            <p><strong>Strategic Depth:</strong> The display score system creates interesting decisions - negative bags
                don't hurt your visible score, but they're devastating in close games. Meanwhile, positive bags boost
                your display but can trigger painful penalties at 7+ bags. The denial rule prevents lucky discard wins
                when you're behind, ensuring skill matters more than chance in final moments.</p>

            <p><strong>Bottom Line:</strong> Highest display score wins when anyone hits 300+. Ties are nearly
                impossible due to the bag system, but when they occur, more bags (including negative bags closer to
                zero) provide the advantage.</p>
        </div>

        <div class="section">
            <h2>Advanced Features</h2>

            <h3>Auto-Resolution</h3>
            <p>When the outcome of remaining tricks is mathematically certain (like when one player has only spades and
                the other has none), the game automatically plays out the remaining cards to save time while showing you
                exactly what happened.</p>

            <h3>Smart AI Opponent</h3>
            <p>Marta now uses advanced strategy when she's made her bid - she'll lead high cards to force you into
                difficult decisions when you have lots of bags, and she'll strategically dump her dangerous high cards
                on tricks she's going to lose anyway. This creates realistic pressure similar to playing against an
                experienced human opponent.</p>
        </div>

        <div class="section">
            <h2>Strategy Tips</h2>

            <div class="tip">
                <strong>Bidding Strategy:</strong>
                <ul>
                    <li>Count your high spades - they're usually reliable tricks</li>
                    <li>Look for aces in other suits, but remember they can be trumped</li>
                    <li>Consider void suits (suits you have no cards in) - you can trump them</li>
                    <li>Be conservative when you have many bags</li>
                    <li>Consider Blind NIL as a last resort when far behind - it's all or nothing!</li>
                </ul>
            </div>

            <div class="tip">
                <strong>Playing Strategy:</strong>
                <ul>
                    <li>Try to force out high cards early when you're leading</li>
                    <li>Count cards to know what's still in play</li>
                    <li>Use your spades wisely - they're powerful but limited</li>
                    <li>Sometimes let your opponent win tricks if you've already made your bid</li>
                    <li>Be extra careful about bag management - Marta actively exploits your weaknesses!</li>
                </ul>
            </div>

            <div class="tip">
                <strong>Discard Strategy:</strong>
                <ul>
                    <li>Discard singleton special cards (7♦ or 10♣) to create voids</li>
                    <li>Create voids in suits where you have spades to trump</li>
                    <li>Consider the parity game - sometimes a strategic discard can win you bonus points</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>Interface Guide</h2>
            <ul>
                <li><strong>Top Headers:</strong> Show game scores, hand number, and current hand status</li>
                <li><strong>Play Area:</strong> Shows current trick being played</li>
                <li><strong>Your Cards:</strong> Click to select, then use the action button</li>
                <li><strong>Results Summary:</strong> After each hand, review detailed scoring and trick history</li>
                <li><strong>Auto-Resolution Message:</strong> When remaining tricks are predetermined, you'll see
                    exactly what happened</li>
            </ul>
        </div>

        <div class="section">
            <div class="ai-update">
                <h3>Recent Improvement</h3>
                <p><strong>Marta now plays much smarter!</strong> When she's made her bid, she actively forces you into
                    difficult decisions by leading high cards when you have 5+ bags, and strategically dumps her highest
                    losing cards (like playing Queen instead of 2 when you lead King) to avoid getting stuck with
                    dangerous high cards later. This creates realistic pressure and makes bag management much more
                    challenging.</p>
            </div>
        </div>

        <div class="section">
            <p style="text-align: center; margin-top: 40px; font-style: italic; color: #666;">
                Two-Man Spades combines strategy, memory, and calculated risk-taking. Each hand is a puzzle to solve,
                and each game tells a story. With Marta's improved AI, you'll face tougher decisions and more realistic
                pressure. Good luck, and may your bids be true!
            </p>
        </div>
    </div>
</body>

</html>